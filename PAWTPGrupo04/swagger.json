{
    "swagger": "2.0",
    "info": {
        "version": "1.0.0",
        "title": "pawtpRestAPI",
        "description": ""
    },
    "host": "localhost:3000",
    "basePath": "/",
    "tags": [
        {
            "name": "Users",
            "description": "All Users of the platform, both workers and patients"
        },
        {
            "name": "Pedidos",
            "description": "Requests made by oatients to be  handled by the workers"
        }
    ],
    "schemes": [
        "http"
    ],
    "securityDefinitions": {
        "JWT": {
            "type": "apiKey",
            "name": "user_session",
            "description": "JWT authorization of an API",
            "in": "cookie"
        }
    },
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "paths": {
        "/request": {
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get all the requests in the DB",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections"
                    }
                }
            },
            "post": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get all the requests in the DB",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestRequest"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not post requests, check DB connections or data"
                    }
                }
            }
        },
        "/request/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "ID of the targeted Request",
                    "type": "string"
                }
            ],
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get the specific request via ID",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections"
                    }
                }
            },
            "put": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Update the specific request via the ID",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestUpdate"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not update request, check DB connections or data"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Marks a specific entry in the DB for deletion, signaling for the DB manager",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestUpdate"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not update request, check DB connections or data"
                    }
                }
            }
        },
        "/request/saude24": {
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get request in DB which users were send by Saude24 ",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/request/gruposrisco": {
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get request in DB in which users belong to a Risk Group ",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/request/trabalhadores": {
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get request in DB in which users work in a  Risk job ",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/request/infetados": {
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get request in DB in which users were infected at the time of the request ",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/request/testespositivos": {
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get request in DB in which users were found positive",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/request/testesnegativos": {
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get request in DB in which users were found negative ",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/request/countDay/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "Targeted Date to get count",
                    "type": "string"
                }
            ],
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get request in DB belonging to a certain user",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": ""
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/request/user/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "CC (personal-id) of the targeted user",
                    "type": "string"
                }
            ],
            "get": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Get request in DB belonging to a certain user",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/request/update/firstDate/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "Personal ID",
                    "type": "string"
                }
            ],
            "put": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Update the first date in a specific Request",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestUpdate"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    },
                    "400": {
                        "description": "Failure, could not process given information"
                    }
                }
            }
        },
        "/request/update/firstTest/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "Personal ID",
                    "type": "string"
                }
            ],
            "put": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Puts the results of the first test in the required request, schedules the next if negative ",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestUpdate"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    },
                    "400": {
                        "description": "Failure, could not process given information"
                    }
                }
            }
        },
        "/request/update/secondDate/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "Personal ID",
                    "type": "string"
                }
            ],
            "put": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Update the second date in a specific Request",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestUpdate"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    },
                    "400": {
                        "description": "Failure, could not process given information"
                    }
                }
            }
        },
        "/request/update/secondTest/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "Personal ID",
                    "type": "string"
                }
            ],
            "put": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Puts the results of the second test in the required request, marks the patients diagnosis ",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestUpdate"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    },
                    "400": {
                        "description": "Failure, could not process given information"
                    }
                }
            }
        },
        "/request/update/filepath/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "Personal ID",
                    "type": "string"
                }
            ],
            "put": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Update the filepath in the DB instance",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestUpdate"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    },
                    "400": {
                        "description": "Failure, could not process given information"
                    }
                }
            }
        },
        "/request/update/worker/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "Personal ID",
                    "type": "string"
                }
            ],
            "put": {
                "tags": [
                    "Pedidos"
                ],
                "summary": "Puts the technician id in the attributed request",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/RequestUpdate"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    },
                    "400": {
                        "description": "Failure, could not process given information"
                    }
                }
            }
        },
        "/user/": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get all the users in the DB",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/UserResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find users, check DB connections"
                    }
                }
            },
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Post a user to the DB",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "content": {
                            "application/json": {
                                "type": "object",
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "msg": {
                                        "type": "array",
                                        "schema": {
                                            "$ref": "#/definitions/UserRequest"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not post user, check DB connections or data",
                        "content": {
                            "application/json": {
                                "type": "object",
                                "properties": {
                                    "success": {
                                        "type": "boolean"
                                    },
                                    "msg": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/user/utentes": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Gets All Pacients",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/UserResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/user/tecnicos": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Gets All Pacients",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/UserResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/user/utentes/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "User CC-id",
                    "type": "string"
                }
            ],
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Gets a certain Pacient using its CC-id",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/UserResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/user/tecnicos/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "Worker CC-id",
                    "type": "string"
                }
            ],
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Gets a certain Worker using its CC-id",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/UserResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/user/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "User MongoDB id",
                    "type": "string"
                }
            ],
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Gets a certain Pacient using its MongoDB id",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/UserResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            },
            "put": {
                "tags": [
                    "Users"
                ],
                "summary": "Updates a certain user with its MongoDB ID",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/UserUpdate"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Users"
                ],
                "summary": "Marks a certain user for deletion",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/UserResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        },
        "/user/CC/{id}": {
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "description": "User Citizen Card Number",
                    "type": "string"
                }
            ],
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Gets a certain User using its Citizen Card Number",
                "responses": {
                    "200": {
                        "description": "Task Successful",
                        "schema": {
                            "$ref": "#/definitions/UserResponse"
                        }
                    },
                    "404": {
                        "description": "Failure, couldn't not find requests, check DB connections or DB data"
                    }
                }
            }
        }
    },
    "definitions": {
        "RequestReponse": {
            "properties": {
                "idRequest": {
                    "type": "string"
                },
                "dataInicial": {
                    "type": "date"
                },
                "dataFinal": {
                    "type": "date"
                },
                "tecnicoResponsavel": {
                    "type": "number"
                },
                "CCutente": {
                    "type": "string"
                },
                "trabalhadorDeRisco": {
                    "type": "boolean"
                },
                "grupoDeRisco": {
                    "type": "boolean"
                },
                "encaminhado_saude24": {
                    "type": "boolean"
                },
                "resultadoInicial": {
                    "type": "boolean"
                },
                "resultadoFinal": {
                    "type": "boolean"
                },
                "casoFechado": {
                    "type": "boolean"
                },
                "deleted": {
                    "type": "boolean"
                },
                "updated_at": {
                    "type": "date"
                }
            }
        },
        "RequestRequest": {
            "required": [
                "idRequest",
                "CCutente",
                "trabalhadorDeRisco",
                "grupoDeRisco",
                "encaminhado_saude24"
            ],
            "properties": {
                "idRequest": {
                    "type": "string",
                    "uniqueItems": true
                },
                "dataInicial": {
                    "type": "date"
                },
                "dataFinal": {
                    "type": "date"
                },
                "tecnicoResponsavel": {
                    "type": "number"
                },
                "CCutente": {
                    "type": "string"
                },
                "trabalhadorDeRisco": {
                    "type": "boolean"
                },
                "grupoDeRisco": {
                    "type": "boolean"
                },
                "encaminhado_saude24": {
                    "type": "boolean"
                },
                "resultadoInicial": {
                    "type": "boolean"
                },
                "resultadoFinal": {
                    "type": "boolean"
                },
                "casoFechado": {
                    "type": "boolean"
                },
                "deleted": {
                    "type": "boolean"
                },
                "updated_at": {
                    "type": "date"
                }
            }
        },
        "RequestUpdate": {
            "properties": {
                "old": {
                    "idRequest": {
                        "type": "string"
                    },
                    "dataInicial": {
                        "type": "date"
                    },
                    "dataFinal": {
                        "type": "date"
                    },
                    "tecnicoResponsavel": {
                        "type": "number"
                    },
                    "CCutente": {
                        "type": "string"
                    },
                    "trabalhadorDeRisco": {
                        "type": "boolean"
                    },
                    "grupoDeRisco": {
                        "type": "boolean"
                    },
                    "encaminhado_saude24": {
                        "type": "boolean"
                    },
                    "resultadoInicial": {
                        "type": "boolean"
                    },
                    "resultadoFinal": {
                        "type": "boolean"
                    },
                    "casoFechado": {
                        "type": "boolean"
                    },
                    "deleted": {
                        "type": "boolean"
                    },
                    "updated_at": {
                        "type": "date"
                    }
                },
                "new": {
                    "idRequest": {
                        "type": "string"
                    },
                    "dataInicial": {
                        "type": "date"
                    },
                    "dataFinal": {
                        "type": "date"
                    },
                    "tecnicoResponsavel": {
                        "type": "number"
                    },
                    "CCutente": {
                        "type": "string"
                    },
                    "trabalhadorDeRisco": {
                        "type": "boolean"
                    },
                    "grupoDeRisco": {
                        "type": "boolean"
                    },
                    "encaminhado_saude24": {
                        "type": "boolean"
                    },
                    "resultadoInicial": {
                        "type": "boolean"
                    },
                    "resultadoFinal": {
                        "type": "boolean"
                    },
                    "casoFechado": {
                        "type": "boolean"
                    },
                    "deleted": {
                        "type": "boolean"
                    },
                    "updated_at": {
                        "type": "date"
                    }
                }
            }
        },
        "UserReponse": {
            "properties": {
                "CC": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "genero": {
                    "type": "string"
                },
                "phoneNumber": {
                    "type": "number"
                },
                "birthdate": {
                    "type": "date"
                },
                "estado": {
                    "type": "string"
                },
                "role": {
                    "type": "string"
                }
            }
        },
        "UserRequest": {
            "required": [
                "CC",
                "password",
                "name",
                "genero",
                "birthdate",
                "phoneNumber",
                "role",
                "estado"
            ],
            "properties": {
                "CC": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "genero": {
                    "type": "string"
                },
                "phoneNumber": {
                    "type": "number"
                },
                "birthdate": {
                    "type": "date"
                },
                "estado": {
                    "type": "string"
                }
            }
        },
        "UserUpdate": {
            "properties": {
                "old": {
                    "CC": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "genero": {
                        "type": "string"
                    },
                    "phoneNumber": {
                        "type": "number"
                    },
                    "birthdate": {
                        "type": "date"
                    },
                    "estado": {
                        "type": "string"
                    },
                    "role": {
                        "type": "string"
                    }
                },
                "new": {
                    "CC": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "genero": {
                        "type": "string"
                    },
                    "phoneNumber": {
                        "type": "number"
                    },
                    "birthdate": {
                        "type": "date"
                    },
                    "estado": {
                        "type": "string"
                    },
                    "role": {
                        "type": "string"
                    }
                }
            }
        }
    }
}